<div class="container">
    <h1 class="section-title" align="center">Pictures</h1>
    <% if logged_in? %>
        <%= link_to "post a picture <i class='fa fa-plus'></i>".html_safe, "#", data: {toggle: "modal", target: "#galleryModal"}, class: "btn btn-lg btn-success" %>
    <% else %>
        <p align="center">please <%= link_to "log in", login_path, data: {toggle: "modal", target: "#myModal"} %> to post pictures</p>
    <% end %>
    <% if @galleries %>
        <% @galleries.each do |picture| %>
            <div class="gallery-card card">
                <%= image_tag(picture.image.url(:thumb), class: "gallery-img") if picture.image? %>
                <div class="card-body">
                    <%= picture.caption %>
                    <% if picture.user_id == current_user.id %>
                        <%= button_to "delete image", picture_path, method: :delete, class: "btn btn-block btn-danger" %>
                    <% end %>
                </div>
            </div>
        <% end %>
    <% end %>
</div>

<div id="galleryModal" class="modal fade">
    <div class="modal-dialog modal-login">
        <div class="model-content">
            <div class="modal-body">
                <%= form_for @gallery, user_id: @user_id do |f| %>
                <div class="form-group">
                    <%= f.label :caption, class: "session-label" %>
                    <%= f.text_field :caption, class: "form-control", placeholder: "caption", required: "required" %>
                </div>
                <div class="form-group">
                    <%= f.label :picture, class: "session-label" %>
                    <%= f.file_field :image, class: "form-control", required: "required" %>
                </div>
                <div class="form-group">
                    <%= f.submit "Post", class: "btn btn-primary btn-block btn-lg" %>
                </div>
                <% end %>
            </div>
        </div>
    </div>
</div>